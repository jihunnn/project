<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.mypage">

	<resultMap id="myOrderInfoResult" type="MypageVO">
		<result property="memOrderSeqNum" column="memOrderSeqNum" />
		<result property="memOrderNum" column="memOrderNum" />
		<result property="memId" column="memId" />
		<result property="productNum" column="productNum" />
		<result property="memSpName" column="memSpName" />
		<result property="memSpPhoneNum1" column="memSpPhoneNum1" />
		<result property="memSpPhoneNum2" column="memSpPhoneNum2" />
		<result property="memSpAdr" column="memSpAdr" />
		<result property="memOrderMsg" column="memOrderMsg" />
		<result property="memDepositorName" column="memDepositorName" />
		<result property="memPaymentMethod" column="memPaymentMethod" />
		<result property="totalPrice" column="totalPrice" />
		<result property="memOrderDate" column="memOrderDate" />
		<result property="productCnt" column="productCnt" />
		<result property="productImage" column="productImage" />

	</resultMap>

	<!--마이페이지 주문/배송조회 -->
	<select id="selectAllMyOrderInfoList"
		resultMap="myOrderInfoResult">
	<![CDATA[
			
		select memOrderNum, memOrderDate, productCnt, option1,p.productImage, p.productName, d.deliveryStatus 
		from memberOrder as o left join product as p on o.productNum=p.productNum 
		join memdelivery as d on o.memOrderSeqNum=d.memOrderSeqNum  where o.memId=#{memId} order by memOrderDate desc
		limit #{pageStart}, #{perPageNum};
			
	]]>
	</select>
	<select id="selectMyOrderInfoCount" resultType="int"
		parameterType="int">
	<![CDATA[
			
			select count(*)  from memberOrder where memId=#{memId};
			
	]]>
	</select>
</mapper>